---
export interface Props {
  organization: string;
  role: string;
  startDate: string;   // "YYYY-MM"
  endDate: string | null;
  isLast?: boolean;
}

const { organization, role, startDate, endDate, isLast = false } = Astro.props;

function formatDate(ym: string): string {
  const [year, month] = ym.split('-');
  return `${year}年${parseInt(month)}月`;
}

const start = formatDate(startDate);
const end = endDate ? formatDate(endDate) : '現在';
---

<div class="relative flex gap-4">
  <!-- タイムラインライン -->
  <div class="flex flex-col items-center">
    <div
      class="w-3 h-3 rounded-full shrink-0 mt-1"
      style="background: var(--color-primary);"
    />
    {!isLast && (
      <div class="w-px flex-1 mt-1" style="background: var(--color-border);"></div>
    )}
  </div>

  <!-- コンテンツ -->
  <div class="pb-6 flex-1">
    <p class="text-sm font-mono mb-1" style="color: var(--color-primary);">
      {start} — {end}
    </p>
    <p class="font-semibold text-base leading-snug" style="color: var(--color-text);">
      {organization}
    </p>
    <p class="text-sm mt-0.5" style="color: var(--color-text-muted);">
      {role}
    </p>
  </div>
</div>
