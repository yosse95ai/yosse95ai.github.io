---
import { getCollection } from 'astro:content';

const allCareer = await getCollection('career');
// endDate が null = 現職
const current = allCareer.find(c => c.data.endDate === null);
---

<section
  class="rounded-3xl p-8 flex flex-col gap-6 w-full"
  style="background: oklch(0.96 0.006 120); box-shadow: 0 1px 4px oklch(0.70 0.010 150 / 0.10);"
>
  <!-- プロフィール写真 + 名前 -->
  <div class="flex items-center gap-4">
    <img
      src="/images/icon.jpg"
      alt="プロフィール写真"
      width="72"
      height="72"
      class="rounded-2xl object-cover shrink-0"
      style="box-shadow: 0 2px 8px oklch(0.70 0.010 150 / 0.20);"
    />
    <div>
      {current && (
        <p class="text-xs font-mono mb-0.5" style="color: oklch(0.55 0.15 145);">
          {current.data.role}
        </p>
      )}
      <h1 class="text-2xl font-bold leading-tight" style="color: oklch(0.20 0.010 250);">
        Hiroaki Yoshimura
      </h1>
      {current && (
        <p class="text-sm" style="color: oklch(0.45 0.010 250);">
          {current.data.organization}
        </p>
      )}
    </div>
  </div>

  <!-- 自己紹介 -->
  <div class="space-y-3">
    {current?.data.description && (
      <p class="text-sm leading-relaxed" style="color: oklch(0.35 0.010 250);">
        {current.data.description}
      </p>
    )}
  </div>
</section>
